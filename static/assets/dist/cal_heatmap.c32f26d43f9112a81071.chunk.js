(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{1900:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(2652)),o=r(n(2998)),a=r(n(3005));function r(t){return t&&t.__esModule?t:{default:t}}e.default=(0,i.default)(o.default,a.default)},2652:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;return function(){return function(n,s,l){var u=new r.default(n,s,l);a.default.render(o.default.createElement(t,i({width:n.width(),height:n.height()},e(u))),document.querySelector(n.selector))}}()};var o=s(n(1)),a=s(n(10)),r=s(n(2653));function s(t){return t&&t.__esModule?t:{default:t}}var l=function(){return function(t){return t}}()},2653:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(2654),a=(i=o)&&i.__esModule?i:{default:i};var r=function(){return function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.annotationData=e.annotationData,this.datasource=(0,a.default)(e.datasource),this.rawDatasource=e.datasource,this.filters=e.getFilters(),this.formData=(0,a.default)(e.formData),this.onAddFilter=function(){e.addFilter.apply(e,arguments)},this.onError=function(){e.error.apply(e,arguments)},this.payload=n,this.setControlValue=i}}();e.default=r},2654:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(2663)),o=r(n(2664)),a=r(n(2665));function r(t){return t&&t.__esModule?t:{default:t}}e.default=function(t){if(null==t)return t;if((0,i.default)(t))return(0,a.default)(function(t){return(0,o.default)(t)},t);throw new Error("Cannot convert input that is not a plain object: "+t)}},2657:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e.default=function(t){var e=function(e){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e.setContainerRef=e.setContainerRef.bind(e),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,e),i(n,[{key:"componentDidMount",value:function(){return function(){this.execute()}}()},{key:"componentDidUpdate",value:function(){return function(){this.execute()}}()},{key:"componentWillUnmount",value:function(){return function(){this.container=null}}()},{key:"setContainerRef",value:function(){return function(t){this.container=t}}()},{key:"execute",value:function(){return function(){this.container&&t(this.container,this.props)}}()},{key:"render",value:function(){return function(){var t=this.props,e=t.id,n=t.className;return r.default.createElement("div",{id:e,className:n,ref:this.setContainerRef})}}()}]),n}(r.default.Component);t.displayName&&(e.displayName=t.displayName);t.propTypes&&(e.propTypes=t.propTypes);t.defaultProps&&(e.defaultProps=t.defaultProps);return e};var o,a=n(1),r=(o=a)&&o.__esModule?o:{default:o}},2776:function(t,e,n){},2998:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(n(2657)),o=a(n(2999));function a(t){return t&&t.__esModule?t:{default:t}}e.default=(0,i.default)(o.default)},2999:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=u(n(55)),o=u(n(0)),a=n(388),r=u(n(3e3)),s=n(70),l=n(79);function u(t){return t&&t.__esModule?t:{default:t}}n(3001),n(3003);var c=function(){return function(t){return(0,l.UTC)(new Date(t)).getTime()}}(),m={data:o.default.shape({data:o.default.object,domain:o.default.string,range:o.default.number,start:o.default.number,subdomain:o.default.string}),height:o.default.number,cellPadding:o.default.number,cellRadius:o.default.number,cellSize:o.default.number,linearColorScheme:o.default.string,showLegend:o.default.bool,showMetricName:o.default.bool,showValues:o.default.bool,steps:o.default.number,timeFormat:o.default.string,valueFormat:o.default.string,verboseMap:o.default.object};function h(t,e){var n=e.data,o=e.height,l=e.cellPadding,u=void 0===l?3:l,m=e.cellRadius,h=void 0===m?0:m,d=e.cellSize,g=void 0===d?10:d,f=e.linearColorScheme,p=e.showLegend,D=e.showMetricName,y=e.showValues,w=e.steps,b=e.timeFormat,v=e.valueFormat,M=e.verboseMap,x=(0,s.d3FormatPreset)(v),_=(0,s.d3TimeFormatPreset)(b),T=i.default.select(t).style("height",o);T.selectAll("*").remove();var N=T.append("div"),k=y?function(t,e){return x(e)}:null,S={};Object.keys(n.data).forEach(function(t){S[t]={},Object.keys(n.data[t]).forEach(function(e){S[t][c(1e3*e)/1e3]=n.data[t][e]})}),Object.keys(S).forEach(function(t){var e=N.append("div");D&&e.text("Metric: "+(M[t]||t));var o=S[t],s=i.default.extent(Object.keys(o),function(t){return o[t]}),l=(s[1]-s[0])/(w-1),m=(0,a.colorScalerFactory)(f,null,null,s),d=i.default.range(w).map(function(t){return s[0]+l*t}),y=d.map(m);(new r.default).init({start:c(n.start),data:o,itemSelector:e[0][0],legendVerticalPosition:"top",cellSize:g,cellPadding:u,cellRadius:h,legendCellSize:g,legendCellPadding:2,legendCellRadius:h,tooltip:!0,domain:n.domain,subDomain:n.subdomain,range:n.range,browsing:!0,legend:d,legendColors:{colorScale:m,min:y[0],max:y[y.length-1],empty:"white"},displayLegend:p,itemName:"",valueFormatter:x,timeFormatter:_,subDomainTextFormat:k})})}h.displayName="Calendar",h.propTypes=m,e.default=h},3000:function(t,e,n){"use strict";var i,o,a,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=n(2749),l=(a=s)&&a.__esModule?a:{default:a};n(2776);var u=n(55),c=(u=n(55),function(){return function(){var t=this;for(var e in t.tip=(0,l.default)().attr("class","d3-tip").direction("n").offset([-5,0]).html(function(e){return"\n      "+t.options.timeFormatter(e.t)+": <strong>"+t.options.valueFormatter(e.v)+"</strong>\n    "}),t.legendTip=(0,l.default)().attr("class","d3-tip").direction("n").offset([-5,0]).html(function(e){return t.options.valueFormatter(e)}),this.allowedDataType=["json","csv","tsv","txt"],this.options={itemSelector:"#cal-heatmap",paintOnLoad:!0,range:12,cellSize:10,cellPadding:2,cellRadius:0,domainGutter:2,domainMargin:[0,0,0,0],valueFormatter:function(t){return t},timeFormatter:function(t){return t},domain:"hour",subDomain:"min",colLimit:null,rowLimit:null,weekStartOnMonday:!0,start:new Date,minDate:null,maxDate:null,data:"",dataType:this.allowedDataType[0],dataPostPayload:null,dataRequestHeaders:null,considerMissingDataAsZero:!1,loadOnInit:!0,verticalOrientation:!1,domainDynamicDimension:!0,label:{position:"bottom",align:"center",offset:{x:0,y:0},rotate:null,width:100,height:null},legend:[10,20,30,40],displayLegend:!0,legendCellSize:10,legendCellPadding:2,legendMargin:[0,0,0,0],legendVerticalPosition:"bottom",legendHorizontalPosition:"left",legendOrientation:"horizontal",legendColors:null,highlight:[],itemName:["item","items"],domainLabelFormat:null,subDomainTitleFormat:{empty:"{date}",filled:"{count} {name} {connector} {date}"},subDomainDateFormat:null,subDomainTextFormat:null,legendTitleFormat:{lower:"less than {min} {name}",inner:"between {down} and {up} {name}",upper:"more than {max} {name}"},animationDuration:500,nextSelector:!1,previousSelector:!1,itemNamespace:"cal-heatmap",tooltip:!1,onClick:null,afterLoad:null,afterLoadNextDomain:null,afterLoadPreviousDomain:null,onComplete:null,afterLoadData:function(t){return t},afterUpdate:null,onMaxDomainReached:null,onMinDomainReached:null},this._domainType={min:{name:"minute",level:10,maxItemNumber:60,defaultRowNumber:10,defaultColumnNumber:6,row:function(e){return t.getSubDomainRowNumber(e)},column:function(e){return t.getSubDomainColumnNumber(e)},position:{x:function(e){return Math.floor(e.getMinutes()/t._domainType.min.row(e))},y:function(e){return e.getMinutes()%t._domainType.min.row(e)}},format:{date:"%H:%M, %A %B %-e, %Y",legend:"",connector:"at"},extractUnit:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes()).getTime()}},hour:{name:"hour",level:20,maxItemNumber:function(e){switch(t.options.domain){case"day":return 24;case"week":return 168;case"month":return 24*(t.options.domainDynamicDimension?t.getDayCountInMonth(e):31)}},defaultRowNumber:6,defaultColumnNumber:function(e){switch(t.options.domain){case"day":return 4;case"week":return 28;case"month":return t.options.domainDynamicDimension?t.getDayCountInMonth(e):31}},row:function(e){return t.getSubDomainRowNumber(e)},column:function(e){return t.getSubDomainColumnNumber(e)},position:{x:function(e){return"month"===t.options.domain?t.options.colLimit>0||t.options.rowLimit>0?Math.floor((e.getHours()+24*(e.getDate()-1))/t._domainType.hour.row(e)):Math.floor(e.getHours()/t._domainType.hour.row(e))+4*(e.getDate()-1):"week"===t.options.domain?t.options.colLimit>0||t.options.rowLimit>0?Math.floor((e.getHours()+24*t.getWeekDay(e))/t._domainType.hour.row(e)):Math.floor(e.getHours()/t._domainType.hour.row(e))+4*t.getWeekDay(e):Math.floor(e.getHours()/t._domainType.hour.row(e))},y:function(e){var n=e.getHours();if(t.options.colLimit>0||t.options.rowLimit>0)switch(t.options.domain){case"month":n+=24*(e.getDate()-1);break;case"week":n+=24*t.getWeekDay(e)}return Math.floor(n%t._domainType.hour.row(e))}},format:{date:"%Hh, %A %B %-e, %Y",legend:"%H:00",connector:"at"},extractUnit:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours()).getTime()}},day:{name:"day",level:30,maxItemNumber:function(e){switch(t.options.domain){case"week":return 7;case"month":return t.options.domainDynamicDimension?t.getDayCountInMonth(e):31;case"year":return t.options.domainDynamicDimension?t.getDayCountInYear(e):366}},defaultColumnNumber:function(e){switch(e=new Date(e),t.options.domain){case"week":return 1;case"month":return t.options.domainDynamicDimension&&!t.options.verticalOrientation?t.getWeekNumber(new Date(e.getFullYear(),e.getMonth()+1,0))-t.getWeekNumber(e)+1:6;case"year":return t.options.domainDynamicDimension?t.getWeekNumber(new Date(e.getFullYear(),11,31))-t.getWeekNumber(new Date(e.getFullYear(),0))+1:54}},defaultRowNumber:7,row:function(e){return t.getSubDomainRowNumber(e)},column:function(e){return t.getSubDomainColumnNumber(e)},position:{x:function(e){switch(t.options.domain){case"week":return Math.floor(t.getWeekDay(e)/t._domainType.day.row(e));case"month":return t.options.colLimit>0||t.options.rowLimit>0?Math.floor((e.getDate()-1)/t._domainType.day.row(e)):t.getWeekNumber(e)-t.getWeekNumber(new Date(e.getFullYear(),e.getMonth()));case"year":return t.options.colLimit>0||t.options.rowLimit>0?Math.floor((t.getDayOfYear(e)-1)/t._domainType.day.row(e)):t.getWeekNumber(e)}},y:function(e){var n=t.getWeekDay(e);if(t.options.colLimit>0||t.options.rowLimit>0)switch(t.options.domain){case"year":n=t.getDayOfYear(e)-1;break;case"week":n=t.getWeekDay(e);break;case"month":n=e.getDate()-1}return Math.floor(n%t._domainType.day.row(e))}},format:{date:"%A %B %-e, %Y",legend:"%e %b",connector:"on"},extractUnit:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()}},week:{name:"week",level:40,maxItemNumber:54,defaultColumnNumber:function(e){switch(e=new Date(e),t.options.domain){case"year":return t._domainType.week.maxItemNumber;case"month":return t.options.domainDynamicDimension?t.getWeekNumber(new Date(e.getFullYear(),e.getMonth()+1,0))-t.getWeekNumber(e):5}},defaultRowNumber:1,row:function(e){return t.getSubDomainRowNumber(e)},column:function(e){return t.getSubDomainColumnNumber(e)},position:{x:function(e){switch(t.options.domain){case"year":return Math.floor(t.getWeekNumber(e)/t._domainType.week.row(e));case"month":return Math.floor(t.getMonthWeekNumber(e)/t._domainType.week.row(e))}},y:function(e){return t.getWeekNumber(e)%t._domainType.week.row(e)}},format:{date:"%B Week #%W",legend:"%B Week #%W",connector:"in"},extractUnit:function(e){var n=new Date(e.getFullYear(),e.getMonth(),e.getDate()),i=n.getDay()-(t.options.weekStartOnMonday?1:0);return i<0&&(i=6),n.setDate(n.getDate()-i),n.getTime()}},month:{name:"month",level:50,maxItemNumber:12,defaultColumnNumber:12,defaultRowNumber:1,row:function(){return t.getSubDomainRowNumber()},column:function(){return t.getSubDomainColumnNumber()},position:{x:function(e){return Math.floor(e.getMonth()/t._domainType.month.row(e))},y:function(e){return e.getMonth()%t._domainType.month.row(e)}},format:{date:"%B %Y",legend:"%B",connector:"in"},extractUnit:function(t){return new Date(t.getFullYear(),t.getMonth()).getTime()}},year:{name:"year",level:60,row:function(){return t.options.rowLimit||1},column:function(){return t.options.colLimit||1},position:{x:function(){return 1},y:function(){return 1}},format:{date:"%Y",legend:"%Y",connector:"in"},extractUnit:function(t){return new Date(t.getFullYear()).getTime()}}},this._domainType)if(this._domainType.hasOwnProperty(e)){var n=this._domainType[e];this._domainType["x_"+e]={name:"x_"+e,level:n.type,maxItemNumber:n.maxItemNumber,defaultRowNumber:n.defaultRowNumber,defaultColumnNumber:n.defaultColumnNumber,row:n.column,column:n.row,position:{x:n.position.y,y:n.position.x},format:n.format,extractUnit:n.extractUnit}}function i(e,n){var i=t.options.cellSize*t._domainType[t.options.subDomain].column(e)+t.options.cellPadding*t._domainType[t.options.subDomain].column(e);return 2===arguments.length&&!0===n?i+(t.domainHorizontalLabelWidth+t.options.domainGutter+t.options.domainMargin[1]+t.options.domainMargin[3]):i}function o(e,n){var i=t.options.cellSize*t._domainType[t.options.subDomain].row(e)+t.options.cellPadding*t._domainType[t.options.subDomain].row(e);return 2===arguments.length&&!0===n&&(i+=t.options.domainGutter+t.domainVerticalLabelHeight+t.options.domainMargin[0]+t.options.domainMargin[2]),i}this.lastInsertedSvg=null,this._completed=!1,this._domains=u.map(),this.graphDim={width:0,height:0},this.legendDim={width:0,height:0},this.NAVIGATE_LEFT=1,this.NAVIGATE_RIGHT=2,this.RESET_ALL_ON_UPDATE=0,this.RESET_SINGLE_ON_UPDATE=1,this.APPEND_ON_UPDATE=2,this.DEFAULT_LEGEND_MARGIN=10,this.root=null,this.tooltip=null,this._maxDomainReached=!1,this._minDomainReached=!1,this.domainPosition=new m,this.Legend=null,this.legendScale=null,this.DSTDomain=[],this._init=function(){return t.getDomain(t.options.start).map(function(t){return t.getTime()}).map(function(e){t._domains.set(e,t.getSubDomain(e).map(function(e){return{t:t._domainType[t.options.subDomain].extractUnit(e),v:null}}))}),t.root=u.select(t.options.itemSelector).append("svg").attr("class","cal-heatmap-container"),t.root.attr("x",0).attr("y",0).append("svg").attr("class","graph"),t.Legend=new h(t),t.options.paintOnLoad&&function(){t.verticalDomainLabel="top"===t.options.label.position||"bottom"===t.options.label.position,t.domainVerticalLabelHeight=null===t.options.label.height?Math.max(25,2*t.options.cellSize):t.options.label.height,t.domainHorizontalLabelWidth=0,""===t.options.domainLabelFormat&&null===t.options.label.height&&(t.domainVerticalLabelHeight=0),t.verticalDomainLabel||(t.domainVerticalLabelHeight=0,t.domainHorizontalLabelWidth=t.options.label.width),t.paint(),!1!==t.options.nextSelector&&u.select(t.options.nextSelector).on("click."+t.options.itemNamespace,function(){return u.event.preventDefault(),t.loadNextDomain(1)}),!1!==t.options.previousSelector&&u.select(t.options.previousSelector).on("click."+t.options.itemNamespace,function(){return u.event.preventDefault(),t.loadPreviousDomain(1)}),t.Legend.redraw(t.graphDim.width-t.options.domainGutter-t.options.cellPadding),t.afterLoad();var e=t.getDomainKeys();t.options.loadOnInit?t.getDatas(t.options.data,new Date(e[0]),t.getSubDomain(e[e.length-1]).pop(),function(){t.fill(),t.onComplete()}):t.onComplete(),t.checkIfMinDomainIsReached(e[0]),t.checkIfMaxDomainIsReached(t.getNextDomain().getTime())}(),t.root.call(t.tip),t.root.call(t.legendTip),!0},this.paint=function(e){var a=t.options;0===arguments.length&&(e=!1);var r=t.root.select(".graph").selectAll(".graph-domain").data(function(){var n=t.getDomainKeys();return e===t.NAVIGATE_LEFT?n.reverse():n},function(t){return t}),s=0,l=0,u=r.enter().append("svg").attr("width",function(t){return i(t,!0)}).attr("height",function(t){return o(t,!0)}).attr("x",function(e){return a.verticalOrientation?(t.graphDim.width=Math.max(t.graphDim.width,i(e,!0)),0):c(e,t.graphDim,"width",i(e,!0))}).attr("y",function(e){return a.verticalOrientation?c(e,t.graphDim,"height",o(e,!0)):(t.graphDim.height=Math.max(t.graphDim.height,o(e,!0)),0)}).attr("class",function(e){var n="graph-domain",i=new Date(e);switch(a.domain){case"hour":n+=" h_"+i.getHours();case"day":n+=" d_"+i.getDate()+" dy_"+i.getDay();case"week":n+=" w_"+t.getWeekNumber(i);case"month":n+=" m_"+(i.getMonth()+1);case"year":n+=" y_"+i.getFullYear()}return n});function c(n,i,o,a){var r=0;switch(e){case!1:return r=i[o],i[o]+=a,t.domainPosition.setPosition(n,r),r;case t.NAVIGATE_RIGHT:return t.domainPosition.setPosition(n,i[o]),s=a,l=t.domainPosition.getPositionFromIndex(1),t.domainPosition.shiftRightBy(l),i[o];case t.NAVIGATE_LEFT:return s=-(r=-a),l=i[o]-t.domainPosition.getLast(),t.domainPosition.setPosition(n,r),t.domainPosition.shiftLeftBy(s),r}}t.lastInsertedSvg=u,u.append("rect").attr("width",function(t){return i(t,!0)-a.domainGutter-a.cellPadding}).attr("height",function(t){return o(t,!0)-a.domainGutter-a.cellPadding}).attr("class","domain-background");var m=u.append("svg").attr("x",function(){return"left"===a.label.position?t.domainHorizontalLabelWidth+a.domainMargin[3]:a.domainMargin[3]}).attr("y",function(){return"top"===a.label.position?t.domainVerticalLabelHeight+a.domainMargin[0]:a.domainMargin[0]}).attr("class","graph-subdomain-group").selectAll("g").data(function(e){return t._domains.get(e)}).enter().append("g");m.append("rect").attr("class",function(e){return"graph-rect"+t.getHighlightClassName(e.t)+(null!==a.onClick?" hover_cursor":"")}).attr("width",a.cellSize).attr("height",a.cellSize).attr("x",function(e){return t.positionSubDomainX(e.t)}).attr("y",function(e){return t.positionSubDomainY(e.t)}).on("click",function(e){if(null!==a.onClick)return t.onClick(new Date(e.t),e.v)}).call(function(e){a.cellRadius>0&&e.attr("rx",a.cellRadius).attr("ry",a.cellRadius),null!==t.legendScale&&null!==a.legendColors&&a.legendColors.hasOwnProperty("base")&&e.attr("fill",a.legendColors.base),a.tooltip&&e.on("mouseover",function(e){t.tip.show(e,this)}).on("mouseout",function(){t.tip.hide(n)})}),a.tooltip||m.append("title").text(function(e){return t.formatDate(new Date(e.t),a.subDomainDateFormat)}),""!==a.domainLabelFormat&&u.append("text").attr("class","graph-label").attr("y",function(e){var n=a.domainMargin[0];switch(a.label.position){case"top":n+=t.domainVerticalLabelHeight/2;break;case"bottom":n+=o(e)+t.domainVerticalLabelHeight/2}return n+a.label.offset.y*("right"===a.label.rotate&&"right"===a.label.position||"left"===a.label.rotate&&"left"===a.label.position?-1:1)}).attr("x",function(e){var n=a.domainMargin[3];switch(a.label.position){case"right":n+=i(e);break;case"bottom":case"top":n+=i(e)/2}return"right"===a.label.align?n+t.domainHorizontalLabelWidth-a.label.offset.x*("right"===a.label.rotate?-1:1):n+a.label.offset.x}).attr("text-anchor",function(){switch(a.label.align){case"start":case"left":return"start";case"end":case"right":return"end";default:return"middle"}}).attr("dominant-baseline",function(){return t.verticalDomainLabel?"middle":"top"}).text(function(e){return t.formatDate(new Date(e),a.domainLabelFormat)}).call(function(e){switch(a.label.rotate){case"right":e.attr("transform",function(e){var n="rotate(90), ";switch(a.label.position){case"right":n+="translate(-"+i(e)+" , -"+i(e)+")";break;case"left":n+="translate(0, -"+t.domainHorizontalLabelWidth+")"}return n});break;case"left":e.attr("transform",function(e){var n="rotate(270), ";switch(a.label.position){case"right":n+="translate(-"+(i(e)+t.domainHorizontalLabelWidth)+" , "+i(e)+")";break;case"left":n+="translate(-"+t.domainHorizontalLabelWidth+" , "+t.domainHorizontalLabelWidth+")"}return n})}}),null!==a.subDomainTextFormat&&m.append("text").attr("class",function(e){return"subdomain-text"+t.getHighlightClassName(e.t)}).attr("x",function(e){return t.positionSubDomainX(e.t)+a.cellSize/2}).attr("y",function(e){return t.positionSubDomainY(e.t)+a.cellSize/2}).attr("text-anchor","middle").attr("dominant-baseline","central").text(function(e){return t.formatDate(new Date(e.t),a.subDomainTextFormat)}),!1!==e&&r.transition().duration(a.animationDuration).attr("x",function(e){return a.verticalOrientation?0:t.domainPosition.getPosition(e)}).attr("y",function(e){return a.verticalOrientation?t.domainPosition.getPosition(e):0});var h=t.graphDim.width,d=t.graphDim.height;a.verticalOrientation?t.graphDim.height+=s-l:t.graphDim.width+=s-l,r.exit().transition().duration(a.animationDuration).attr("x",function(n){if(a.verticalOrientation)return 0;switch(e){case t.NAVIGATE_LEFT:return Math.min(t.graphDim.width,h);case t.NAVIGATE_RIGHT:return-i(n,!0)}}).attr("y",function(n){if(!a.verticalOrientation)return 0;switch(e){case t.NAVIGATE_LEFT:return Math.min(t.graphDim.height,d);case t.NAVIGATE_RIGHT:return-o(n,!0)}}).remove(),t.resize()}}}());c.prototype={init:function(){return function(t){var e=this,n=e.options=function t(e,n){for(var i in n)try{n[i].constructor===Object?e[i]=t(e[i],n[i]):e[i]=n[i]}catch(t){e[i]=n[i]}return e}(e.options,t);if(function(){if(!e._domainType.hasOwnProperty(n.domain)||"min"===n.domain||"x_"===n.domain.substring(0,2))throw new Error("The domain '"+n.domain+"' is not valid");if(!e._domainType.hasOwnProperty(n.subDomain)||"year"===n.subDomain)throw new Error("The subDomain '"+n.subDomain+"' is not valid");if(e._domainType[n.domain].level<=e._domainType[n.subDomain].level)throw new Error("'"+n.subDomain+"' is not a valid subDomain to '"+n.domain+"'")}(),r(n.itemSelector,!1,"itemSelector"),-1===e.allowedDataType.indexOf(n.dataType))throw new Error("The data type '"+n.dataType+"' is not valid data type");if(null===u.select(n.itemSelector)[0][0])throw new Error("The node '"+n.itemSelector+"' specified in itemSelector does not exists");try{r(n.nextSelector,!0,"nextSelector"),r(n.previousSelector,!0,"previousSelector")}catch(t){return console.log(t.message),!1}t.hasOwnProperty("subDomain")||(this.options.subDomain=function(t){switch(t){case"year":return"month";case"month":case"week":return"day";case"day":return"hour";default:return"min"}}(t.domain)),"string"==typeof n.itemNamespace&&""!==n.itemNamespace||(console.log("itemNamespace can not be empty, falling back to cal-heatmap"),n.itemNamespace="cal-heatmap");var i,o=["data","onComplete","onClick","afterLoad","afterLoadData","afterLoadPreviousDomain","afterLoadNextDomain","afterUpdate"];for(var a in o)t.hasOwnProperty(o[a])&&(n[o[a]]=t[o[a]]);function r(t,e,n){if((e&&!1===t||t instanceof Element||"string"==typeof t)&&""!==t)return!0;throw new Error("The "+n+" is not valid")}function s(t){switch("number"==typeof t&&(t=[t]),Array.isArray(t)||(console.log("Margin only takes an integer or an array of integers"),t=[0]),t.length){case 1:return[t[0],t[0],t[0],t[0]];case 2:return[t[0],t[1],t[0],t[1]];case 3:return[t[0],t[1],t[2],t[1]];case 4:return t;default:return t.slice(0,4)}}return n.subDomainDateFormat="string"==typeof n.subDomainDateFormat||"function"==typeof n.subDomainDateFormat?n.subDomainDateFormat:this._domainType[n.subDomain].format.date,n.domainLabelFormat="string"==typeof n.domainLabelFormat||"function"==typeof n.domainLabelFormat?n.domainLabelFormat:this._domainType[n.domain].format.legend,n.subDomainTextFormat="string"==typeof n.subDomainTextFormat&&""!==n.subDomainTextFormat||"function"==typeof n.subDomainTextFormat?n.subDomainTextFormat:null,n.domainMargin=s(n.domainMargin),n.legendMargin=s(n.legendMargin),n.highlight=e.expandDateSetting(n.highlight),n.itemName=function(t){return"string"==typeof t?[t,t+(""!==t?"s":"")]:Array.isArray(t)?1===t.length?[t[0],t[0]+"s"]:t.length>2?t.slice(0,2):t:["item","items"]}(n.itemName),n.colLimit=(i=n.colLimit)>0?i:null,n.rowLimit=function(t){return t>0&&n.colLimit>0?(console.log("colLimit and rowLimit are mutually exclusive, rowLimit will be ignored"),null):t>0?t:null}(n.rowLimit),t.hasOwnProperty("legendMargin")||function(){switch(n.legendVerticalPosition){case"top":n.legendMargin[2]=e.DEFAULT_LEGEND_MARGIN;break;case"bottom":n.legendMargin[0]=e.DEFAULT_LEGEND_MARGIN;break;case"middle":case"center":n.legendMargin["right"===n.legendHorizontalPosition?3:1]=e.DEFAULT_LEGEND_MARGIN}}(),function(){if(!t.hasOwnProperty("label")||t.hasOwnProperty("label")&&!t.label.hasOwnProperty("align")){switch(n.label.position){case"left":n.label.align="right";break;case"right":n.label.align="left";break;default:n.label.align="center"}"left"===n.label.rotate?n.label.align="right":"right"===n.label.rotate&&(n.label.align="left")}(!t.hasOwnProperty("label")||t.hasOwnProperty("label")&&!t.label.hasOwnProperty("offset"))&&("left"!==n.label.position&&"right"!==n.label.position||(n.label.offset={x:10,y:15}))}(),this._init()}}(),expandDateSetting:function(){return function(t){return Array.isArray(t)||(t=[t]),t.map(function(t){return"now"===t?new Date:t instanceof Date&&t}).filter(function(t){return!1!==t})}}(),fill:function(){return function(t){var e=this,n=e.options;0===arguments.length&&(t=e.root.selectAll(".graph-domain"));var i=t.selectAll("svg").selectAll("g").data(function(t){return e._domains.get(t)});i.transition().duration(n.animationDuration).select("rect").attr("class",function(t){var i=e.getHighlightClassName(t.t).trim().split(" "),o=e.dateIsLessThan(t.t,new Date),a=e.dateIsEqual(t.t,new Date);return(null===e.legendScale||null===t.v&&n.hasOwnProperty("considerMissingDataAsZero")&&!n.considerMissingDataAsZero&&!n.legendColors.hasOwnProperty("base"))&&i.push("graph-rect"),a?i.push("now"):o||i.push("future"),null!==t.v?i.push(e.Legend.getClass(t.v,null===e.legendScale)):n.considerMissingDataAsZero&&o&&i.push(e.Legend.getClass(0,null===e.legendScale)),null!==n.onClick&&i.push("hover_cursor"),i.join(" ")}).call(function(t){if(null===e.legendScale)return!1;t.attr("fill",function(t){return null===t.v&&n.hasOwnProperty("considerMissingDataAsZero")&&!n.considerMissingDataAsZero&&n.legendColors.hasOwnProperty("base")?n.legendColors.base:null!==n.legendColors&&n.legendColors.hasOwnProperty("empty")&&(0===t.v||null===t.v&&n.hasOwnProperty("considerMissingDataAsZero")&&n.considerMissingDataAsZero)?n.legendColors.empty:t.v<0&&n.legend[0]>0&&null!==n.legendColors&&n.legendColors.hasOwnProperty("overflow")?n.legendColors.overflow:e.legendScale(Math.min(t.v,n.legend[n.legend.length-1]))})}),i.transition().duration(n.animationDuration).select("title").text(function(t){return e.getSubDomainTitle(t)}),i.transition().duration(n.animationDuration).select("text").attr("class",function(t){return"subdomain-text"+e.getHighlightClassName(t.t)}).call(function(t){"function"==typeof n.subDomainTextFormat&&t.text(function(t){return n.subDomainTextFormat(t.t,t.v)})})}}(),formatStringWithObject:function(){return function(t,e){for(var n in e)if(e.hasOwnProperty(n)){var i=new RegExp("\\{"+n+"\\}","gi");t=t.replace(i,e[n])}return t}}(),triggerEvent:function(){return function(t,e,n){return!!(3===arguments.length&&n||null===this.options[t])||("function"==typeof this.options[t]?("function"==typeof e&&(e=e()),this.options[t].apply(this,e)):(console.log("Provided callback for "+t+" is not a function."),!1))}}(),onClick:function(){return function(t,e){return this.triggerEvent("onClick",[t,e])}}(),afterLoad:function(){return function(){return this.triggerEvent("afterLoad")}}(),onComplete:function(){return function(){var t=this.triggerEvent("onComplete",[],this._completed);return this._completed=!0,t}}(),afterLoadPreviousDomain:function(){return function(t){var e=this;return this.triggerEvent("afterLoadPreviousDomain",function(){var n=e.getSubDomain(t);return[n.shift(),n.pop()]})}}(),afterLoadNextDomain:function(){return function(t){var e=this;return this.triggerEvent("afterLoadNextDomain",function(){var n=e.getSubDomain(t);return[n.shift(),n.pop()]})}}(),onMinDomainReached:function(){return function(t){return this._minDomainReached=t,this.triggerEvent("onMinDomainReached",[t])}}(),onMaxDomainReached:function(){return function(t){return this._maxDomainReached=t,this.triggerEvent("onMaxDomainReached",[t])}}(),checkIfMinDomainIsReached:function(){return function(t,e){this.minDomainIsReached(t)&&this.onMinDomainReached(!0),2===arguments.length&&this._maxDomainReached&&!this.maxDomainIsReached(e)&&this.onMaxDomainReached(!1)}}(),checkIfMaxDomainIsReached:function(){return function(t,e){this.maxDomainIsReached(t)&&this.onMaxDomainReached(!0),2===arguments.length&&this._minDomainReached&&!this.minDomainIsReached(e)&&this.onMinDomainReached(!1)}}(),afterUpdate:function(){return function(){return this.triggerEvent("afterUpdate")}}(),formatNumber:u.format(",g"),formatDate:function(){return function(t,e){return arguments.length<2&&(e="title"),"function"==typeof e?e(t):u.time.format(e)(t)}}(),getSubDomainTitle:function(){return function(t){if(null!==t.v||this.options.considerMissingDataAsZero){var e=t.v;return null===e&&this.options.considerMissingDataAsZero&&(e=0),this.formatStringWithObject(this.options.subDomainTitleFormat.filled,{count:this.formatNumber(e),name:this.options.itemName[1!==e?1:0],connector:this._domainType[this.options.subDomain].format.connector,date:this.formatDate(new Date(t.t),this.options.subDomainDateFormat)})}return this.formatStringWithObject(this.options.subDomainTitleFormat.empty,{date:this.formatDate(new Date(t.t),this.options.subDomainDateFormat)})}}(),loadNextDomain:function(){return function(t){if(this._maxDomainReached||0===t)return!1;var e=this.loadNewDomains(this.NAVIGATE_RIGHT,this.getDomain(this.getNextDomain(),t));return this.afterLoadNextDomain(e.end),this.checkIfMaxDomainIsReached(this.getNextDomain().getTime(),e.start),!0}}(),loadPreviousDomain:function(){return function(t){if(this._minDomainReached||0===t)return!1;var e=this.loadNewDomains(this.NAVIGATE_LEFT,this.getDomain(this.getDomainKeys()[0],-t).reverse());return this.afterLoadPreviousDomain(e.start),this.checkIfMinDomainIsReached(e.start,e.end),!0}}(),loadNewDomains:function(){return function(t,e){var n=this,i=t===this.NAVIGATE_LEFT,o=-1,a=e.length,r=this.getDomainKeys();function s(t){return{t:n._domainType[n.options.subDomain].extractUnit(t),v:null}}for(;++o<a;){if(i&&this.minDomainIsReached(e[o])){e=e.slice(0,o+1);break}if(!i&&this.maxDomainIsReached(e[o])){e=e.slice(0,o);break}}for(o=0,a=(e=e.slice(-this.options.range)).length;o<a;o++)this._domains.set(e[o].getTime(),this.getSubDomain(e[o]).map(s)),this._domains.remove(i?r.pop():r.shift());return r=this.getDomainKeys(),i&&(e=e.reverse()),this.paint(t),this.getDatas(this.options.data,e[0],this.getSubDomain(e[e.length-1]).pop(),function(){n.fill(n.lastInsertedSvg)}),{start:e[i?0:1],end:r[r.length-1]}}}(),maxDomainIsReached:function(){return function(t){return null!==this.options.maxDate&&this.options.maxDate.getTime()<t}}(),minDomainIsReached:function(){return function(t){return null!==this.options.minDate&&this.options.minDate.getTime()>=t}}(),getDomainKeys:function(){return function(){return this._domains.keys().map(function(t){return parseInt(t,10)}).sort(function(t,e){return t-e})}}(),positionSubDomainX:function(){return function(t){var e=this._domainType[this.options.subDomain].position.x(new Date(t));return e*this.options.cellSize+e*this.options.cellPadding}}(),positionSubDomainY:function(){return function(t){var e=this._domainType[this.options.subDomain].position.y(new Date(t));return e*this.options.cellSize+e*this.options.cellPadding}}(),getSubDomainColumnNumber:function(){return function(t){if(this.options.rowLimit>0){var e=this._domainType[this.options.subDomain].maxItemNumber;return"function"==typeof e&&(e=e(t)),Math.ceil(e/this.options.rowLimit)}var n=this._domainType[this.options.subDomain].defaultColumnNumber;return"function"==typeof n&&(n=n(t)),this.options.colLimit||n}}(),getSubDomainRowNumber:function(){return function(t){if(this.options.colLimit>0){var e=this._domainType[this.options.subDomain].maxItemNumber;return"function"==typeof e&&(e=e(t)),Math.ceil(e/this.options.colLimit)}var n=this._domainType[this.options.subDomain].defaultRowNumber;return"function"==typeof n&&(n=n(t)),this.options.rowLimit||n}}(),getHighlightClassName:function(){return function(t){if(t=new Date(t),this.options.highlight.length>0)for(var e in this.options.highlight)if(this.dateIsEqual(this.options.highlight[e],t))return this.isNow(this.options.highlight[e])?" highlight-now":" highlight";return""}}(),isNow:function(){return function(t){return this.dateIsEqual(t,new Date)}}(),dateIsEqual:function(){return function(t,e){switch(t instanceof Date||(t=new Date(t)),e instanceof Date||(e=new Date(e)),this.options.subDomain){case"x_min":case"min":return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()&&t.getHours()===e.getHours()&&t.getMinutes()===e.getMinutes();case"x_hour":case"hour":return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()&&t.getHours()===e.getHours();case"x_day":case"day":return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate();case"x_week":case"week":return t.getFullYear()===e.getFullYear()&&this.getWeekNumber(t)===this.getWeekNumber(e);case"x_month":case"month":return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth();default:return!1}}}(),dateIsLessThan:function(){return function(t,e){function n(t,e){switch(e){case"x_min":case"min":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes()).getTime();case"x_hour":case"hour":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours()).getTime();case"x_day":case"day":return new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();case"x_week":case"week":case"x_month":case"month":return new Date(t.getFullYear(),t.getMonth()).getTime();default:return t.getTime()}}return t instanceof Date||(t=new Date(t)),e instanceof Date||(e=new Date(e)),n(t,this.options.subDomain)<n(e,this.options.subDomain)}}(),getDayOfYear:u.time.format("%j"),getWeekNumber:function(){return function(t){return(!0===this.options.weekStartOnMonday?u.time.format("%W"):u.time.format("%U"))(t)}}(),getMonthWeekNumber:function(){return function(t){"number"==typeof t&&(t=new Date(t));var e=this.getWeekNumber(new Date(t.getFullYear(),t.getMonth()));return this.getWeekNumber(t)-e-1}}(),getWeekNumberInYear:function(){return function(t){"number"==typeof t&&(t=new Date(t))}}(),getDayCountInMonth:function(){return function(t){return this.getEndOfMonth(t).getDate()}}(),getDayCountInYear:function(){return function(t){return"number"==typeof t&&(t=new Date(t)),1===new Date(t.getFullYear(),1,29).getMonth()?366:365}}(),getWeekDay:function(){return function(t){return!1===this.options.weekStartOnMonday?t.getDay():0===t.getDay()?6:t.getDay()-1}}(),getEndOfMonth:function(){return function(t){return"number"==typeof t&&(t=new Date(t)),new Date(t.getFullYear(),t.getMonth()+1,0)}}(),jumpDate:function(){return function(t,e,n){var i=new Date(t);switch(n){case"hour":i.setHours(i.getHours()+e);break;case"day":i.setHours(i.getHours()+24*e);break;case"week":i.setHours(i.getHours()+24*e*7);break;case"month":i.setMonth(i.getMonth()+e);break;case"year":i.setFullYear(i.getFullYear()+e)}return new Date(i)}}(),getMinuteDomain:function(){return function(t,e){var n=new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours()),i=null;return i=e instanceof Date?new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours()):new Date(+n+1e3*e*60),u.time.minutes(Math.min(n,i),Math.max(n,i))}}(),getHourDomain:function(){return function(t,e){var n=new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours()),i=null;e instanceof Date?i=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours()):(i=new Date(n)).setHours(i.getHours()+e);var o=u.time.hours(Math.min(n,i),Math.max(n,i)),a=0,r=o.length;for(a=0;a<r;a++)if(a>0&&o[a].getHours()===o[a-1].getHours()){this.DSTDomain.push(o[a].getTime()),o.splice(a,1);break}return"number"==typeof e&&o.length>Math.abs(e)&&o.splice(o.length-1,1),o}}(),getDayDomain:function(){return function(t,e){var n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),i=null;return e instanceof Date?i=new Date(e.getFullYear(),e.getMonth(),e.getDate()):(i=new Date(n),i=new Date(i.setDate(i.getDate()+parseInt(e,10)))),u.time.days(Math.min(n,i),Math.max(n,i))}}(),getWeekDomain:function(){return function(t,e){var n;!1===this.options.weekStartOnMonday?n=new Date(t.getFullYear(),t.getMonth(),t.getDate()-t.getDay()):1===t.getDay()?n=new Date(t.getFullYear(),t.getMonth(),t.getDate()):0===t.getDay()?(n=new Date(t.getFullYear(),t.getMonth(),t.getDate())).setDate(n.getDate()-6):n=new Date(t.getFullYear(),t.getMonth(),t.getDate()-t.getDay()+1);var i=new Date(n),o=e;return"object"!==(void 0===e?"undefined":r(e))&&(o=new Date(i.setDate(i.getDate()+7*e))),!0===this.options.weekStartOnMonday?u.time.mondays(Math.min(n,o),Math.max(n,o)):u.time.sundays(Math.min(n,o),Math.max(n,o))}}(),getMonthDomain:function(){return function(t,e){var n=new Date(t.getFullYear(),t.getMonth()),i=null;return i=e instanceof Date?new Date(e.getFullYear(),e.getMonth()):(i=new Date(n)).setMonth(i.getMonth()+e),u.time.months(Math.min(n,i),Math.max(n,i))}}(),getYearDomain:function(){return function(t,e){var n=new Date(t.getFullYear(),0),i=null;return i=e instanceof Date?new Date(e.getFullYear(),0):new Date(t.getFullYear()+e,0),u.time.years(Math.min(n,i),Math.max(n,i))}}(),getDomain:function(){return function(t,e){switch("number"==typeof t&&(t=new Date(t)),arguments.length<2&&(e=this.options.range),this.options.domain){case"hour":var n=this.getHourDomain(t,e);return"number"==typeof e&&n.length<e&&(e>0?n.push(this.getHourDomain(n[n.length-1],2)[1]):n.shift(this.getHourDomain(n[0],-2)[0])),n;case"day":return this.getDayDomain(t,e);case"week":return this.getWeekDomain(t,e);case"month":return this.getMonthDomain(t,e);case"year":return this.getYearDomain(t,e)}}}(),getSubDomain:function(){return function(t){"number"==typeof t&&(t=new Date(t));var e=this,n=function(t,n){switch(n){case"year":return e.getDayCountInYear(t);case"month":return e.getDayCountInMonth(t);case"week":return 7}},i=function(t,e){switch(e){case"hour":return 60;case"day":return 1440;case"week":return 10080}},o=function(t,n){switch(n){case"day":return 24;case"week":return 168;case"month":return 24*e.getDayCountInMonth(t)}},a=function(t,n){if("month"===n){var i=new Date(t.getFullYear(),t.getMonth()+1,0),o=e.getWeekNumber(i),a=e.getWeekNumber(new Date(t.getFullYear(),t.getMonth()));return a>o&&(a=0,o++),o-a+1}if("year"===n)return e.getWeekNumber(new Date(t.getFullYear(),11,31))};switch(this.options.subDomain){case"x_min":case"min":return this.getMinuteDomain(t,i(t,this.options.domain));case"x_hour":case"hour":return this.getHourDomain(t,o(t,this.options.domain));case"x_day":case"day":return this.getDayDomain(t,n(t,this.options.domain));case"x_week":case"week":return this.getWeekDomain(t,a(t,this.options.domain));case"x_month":case"month":return this.getMonthDomain(t,12)}}}(),getNextDomain:function(){return function(t){return 0===arguments.length&&(t=1),this.getDomain(this.jumpDate(this.getDomainKeys().pop(),t,this.options.domain),1)[0]}}(),getPreviousDomain:function(){return function(t){return 0===arguments.length&&(t=1),this.getDomain(this.jumpDate(this.getDomainKeys().shift(),-t,this.options.domain),1)[0]}}(),getDatas:function(){return function(t,e,n,i,o,a){var s=this;arguments.length<5&&(o=!0),arguments.length<6&&(a=this.APPEND_ON_UPDATE);var l=function(t,r){!1!==o?"function"==typeof o?r=o(r):"function"==typeof s.options.afterLoadData?r=s.options.afterLoadData(r):console.log("Provided callback for afterLoadData is not a function."):"csv"!==s.options.dataType&&"tsv"!==s.options.dataType||(r=this.interpretCSV(r)),s.parseDatas(r,a,e,n),"function"==typeof i&&i()};switch(void 0===t?"undefined":r(t)){case"string":if(""===t)return l(null,{}),!0;var c=this.parseURI(t,e,n),m="GET";null!==s.options.dataPostPayload&&(m="POST");var h=null;null!==s.options.dataPostPayload&&(h=this.parseURI(s.options.dataPostPayload,e,n));var d=null;switch(this.options.dataType){case"json":d=u.json(c);break;case"csv":d=u.csv(c);break;case"tsv":d=u.tsv(c);break;case"txt":d=u.text(c,"text/plain")}if(null!==s.options.dataRequestHeaders)for(var g in s.options.dataRequestHeaders)s.options.dataRequestHeaders.hasOwnProperty(g)&&d.header(g,s.options.dataRequestHeaders[g]);return d.send(m,h,l),!1;case"object":if(t===Object(t))return l(null,t),!1;default:return l(null,{}),!0}}}(),parseDatas:function(){return function(t,e,n,i){e===this.RESET_ALL_ON_UPDATE&&this._domains.forEach(function(t,e){e.forEach(function(t,e,n){n[e].v=null})});var o={},a=function(t){return t.t};for(var r in t){var s=new Date(1e3*r),l=this.getDomain(s)[0].getTime();if(this.DSTDomain.indexOf(l)>=0&&this._domains.has(l-36e5)&&(l-=36e5),!isNaN(r)&&t.hasOwnProperty(r)&&this._domains.has(l)&&l>=+n&&l<+i){var u=this._domains.get(l);o.hasOwnProperty(l)||(o[l]=u.map(a));var c=o[l].indexOf(this._domainType[this.options.subDomain].extractUnit(s));e===this.RESET_SINGLE_ON_UPDATE?u[c].v=t[r]:isNaN(u[c].v)?u[c].v=t[r]:u[c].v+=t[r]}}}}(),parseURI:function(){return function(t,e,n){return t=(t=(t=(t=t.replace(/\{\{t:start\}\}/g,e.getTime()/1e3)).replace(/\{\{t:end\}\}/g,n.getTime()/1e3)).replace(/\{\{d:start\}\}/g,e.toISOString())).replace(/\{\{d:end\}\}/g,n.toISOString())}}(),interpretCSV:function(){return function(t){var e,n,i={},o=Object.keys(t[0]);for(e=0,n=t.length;e<n;e++)i[t[e][o[0]]]=+t[e][o[1]];return i}}(),resize:function(){return function(){var t=this.options,e=t.displayLegend?this.Legend.getDim("width")+t.legendMargin[1]+t.legendMargin[3]:0,n=t.displayLegend?this.Legend.getDim("height")+t.legendMargin[0]+t.legendMargin[2]:0,i=this.graphDim.width-t.domainGutter-t.cellPadding,o=this.graphDim.height-t.domainGutter-t.cellPadding;this.root.transition().duration(t.animationDuration).attr("width",function(){return"middle"===t.legendVerticalPosition||"center"===t.legendVerticalPosition?i+e:Math.max(i,e)}).attr("height",function(){return"middle"===t.legendVerticalPosition||"center"===t.legendVerticalPosition?Math.max(o,n):o+n}),this.root.select(".graph").transition().duration(t.animationDuration).attr("y",function(){return"top"===t.legendVerticalPosition?n:0}).attr("x",function(){return"middle"!==t.legendVerticalPosition&&"center"!==t.legendVerticalPosition||"left"!==t.legendHorizontalPosition?0:e})}}(),next:function(){return function(t){return 0===arguments.length&&(t=1),this.loadNextDomain(t)}}(),previous:function(){return function(t){return 0===arguments.length&&(t=1),this.loadPreviousDomain(t)}}(),jumpTo:function(){return function(t,e){arguments.length<2&&(e=!1);var n=this.getDomainKeys(),i=n[0],o=n[n.length-1];return t<i?this.loadPreviousDomain(this.getDomain(i,t).length):e?this.loadNextDomain(this.getDomain(i,t).length):t>o&&this.loadNextDomain(this.getDomain(o,t).length)}}(),rewind:function(){return function(){this.jumpTo(this.options.start,!0)}}(),update:function(){return function(t,e,n){0===arguments.length&&(t=this.options.data),arguments.length<2&&(e=!0),arguments.length<3&&(n=this.RESET_ALL_ON_UPDATE);var i=this.getDomainKeys(),o=this;this.getDatas(t,new Date(i[0]),this.getSubDomain(i[i.length-1]).pop(),function(){o.fill(),o.afterUpdate()},e,n)}}(),setLegend:function(){return function(){var t=this.options.legend.slice(0);arguments.length>=1&&Array.isArray(arguments[0])&&(this.options.legend=arguments[0]),arguments.length>=2&&(Array.isArray(arguments[1])&&arguments[1].length>=2?this.options.legendColors=[arguments[1][0],arguments[1][1]]:this.options.legendColors=arguments[1]),(arguments.length>0&&!function t(e,n){if(!n||!e)return!1;if(e.length!==n.length)return!1;for(var i=0;i<e.length;i++)if(e[i]instanceof Array&&n[i]instanceof Array){if(!t(e[i],n[i]))return!1}else if(e[i]!==n[i])return!1;return!0}(t,this.options.legend)||arguments.length>=2)&&(this.Legend.buildColors(),this.fill()),this.Legend.redraw(this.graphDim.width-this.options.domainGutter-this.options.cellPadding)}}(),removeLegend:function(){return function(){return!!this.options.displayLegend&&(this.options.displayLegend=!1,this.Legend.remove(),!0)}}(),showLegend:function(){return function(){return!this.options.displayLegend&&(this.options.displayLegend=!0,this.Legend.redraw(this.graphDim.width-this.options.domainGutter-this.options.cellPadding),!0)}}(),highlight:function(){return function(t){return(this.options.highlight=this.expandDateSetting(t)).length>0&&(this.fill(),!0)}}(),destroy:function(){return function(t){return this.root.transition().duration(this.options.animationDuration).attr("width",0).attr("height",0).remove().each("end",function(){"function"==typeof t?t():void 0!==t&&console.log("Provided callback for destroy() is not a function.")}),null}}(),getSVG:function(){return function(){for(var t={".cal-heatmap-container":{},".graph":{},".graph-rect":{},"rect.highlight":{},"rect.now":{},"rect.highlight-now":{},"text.highlight":{},"text.now":{},"text.highlight-now":{},".domain-background":{},".graph-label":{},".subdomain-text":{},".q0":{},".qi":{}},e=1,n=this.options.legend.length+1;e<=n;e++)t[".q"+e]={};var i=this.root,o=["stroke","stroke-width","stroke-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-miterlimit","fill","fill-opacity","fill-rule","marker","marker-start","marker-mid","marker-end","alignement-baseline","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","kerning","text-anchor","shape-rendering","text-transform","font-family","font","font-size","font-weight"],a=function(e,n,i){-1!==o.indexOf(n)&&(t[e][n]=i)},r=function(t){return i.select(t)[0][0]};for(var s in t)if(t.hasOwnProperty(s)){var l=r(s);if(null!==l)if("getComputedStyle"in window){var u=getComputedStyle(l,null);if(0!==u.length)for(var c=0;c<u.length;c++)a(s,u.item(c),u.getPropertyValue(u.item(c)));else for(var m in u)u.hasOwnProperty(m)&&a(s,m,u[m])}else if("currentStyle"in l){var h=l.currentStyle;for(var d in h)a(s,d,h[d])}}var g='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><style type="text/css"><![CDATA[ ';for(var f in t){for(var p in g+=f+" {\n",t[f])g+="\t"+p+":"+t[f][p]+";\n";g+="}\n"}return g+="]]></style>",g+=(new XMLSerializer).serializeToString(this.root[0][0]),g+="</svg>"}}()};var m=function(){return function(){this.positions=u.map()}}();m.prototype.getPosition=function(t){return this.positions.get(t)},m.prototype.getPositionFromIndex=function(t){var e=this.getKeys();return this.positions.get(e[t])},m.prototype.getLast=function(){var t=this.getKeys();return this.positions.get(t[t.length-1])},m.prototype.setPosition=function(t,e){this.positions.set(t,e)},m.prototype.shiftRightBy=function(t){this.positions.forEach(function(e,n){this.set(e,n-t)});var e=this.getKeys();this.positions.remove(e[0])},m.prototype.shiftLeftBy=function(t){this.positions.forEach(function(e,n){this.set(e,n+t)});var e=this.getKeys();this.positions.remove(e[e.length-1])},m.prototype.getKeys=function(){return this.positions.keys().sort(function(t,e){return parseInt(t,10)-parseInt(e,10)})};var h=function(){return function(t){this.calendar=t,this.computeDim(),null!==t.options.legendColors&&this.buildColors()}}();h.prototype.computeDim=function(){var t=this.calendar.options;this.dim={width:t.legendCellSize*(t.legend.length+1)+t.legendCellPadding*t.legend.length,height:t.legendCellSize}},h.prototype.remove=function(){this.calendar.root.select(".graph-legend").remove(),this.calendar.resize()},h.prototype.redraw=function(t){if(!this.calendar.options.displayLegend)return!1;var e,n=this,i=this.calendar,o=i.root,a=i.options;this.computeDim();var r=a.legend.slice(0);r.push(r[r.length-1]+1);var s=i.root.select(".graph-legend");function l(t){t.attr("width",a.legendCellSize).attr("height",a.legendCellSize).attr("rx",a.legendCellRadius).attr("ry",a.legendCellRadius).attr("x",function(t,e){return e*(a.legendCellSize+a.legendCellPadding)})}function u(){switch(a.legendHorizontalPosition){case"right":return"center"===a.legendVerticalPosition||"middle"===a.legendVerticalPosition?t+a.legendMargin[3]:t-n.getDim("width")-a.legendMargin[1];case"middle":case"center":return Math.round(t/2-n.getDim("width")/2);default:return a.legendMargin[3]}}function c(){return"bottom"===a.legendVerticalPosition?i.graphDim.height+a.legendMargin[0]-a.domainGutter-a.cellPadding:a.legendMargin[0]}null!==s[0][0]?e=(o=s).select("g").selectAll("rect").data(r):((o="top"===a.legendVerticalPosition?o.insert("svg",".graph"):o.append("svg")).attr("x",u()).attr("y",c()),e=o.attr("class","graph-legend").attr("height",n.getDim("height")).attr("width",n.getDim("width")).append("g").selectAll().data(r)),e.enter().append("rect").call(l).attr("class",function(t){return i.Legend.getClass(t,null===i.legendScale)}).attr("fill-opacity",0).call(function(t){null!==i.legendScale&&null!==a.legendColors&&a.legendColors.hasOwnProperty("base")&&t.attr("fill",a.legendColors.base)}).append("title"),e.exit().transition().duration(a.animationDuration).attr("fill-opacity",0).remove(),e.transition().delay(function(t,e){return a.animationDuration*e/10}).call(l).attr("fill-opacity",1).call(function(t){t.attr("fill",function(t,e){return null===i.legendScale?"":0===e?i.legendScale(t-1):i.legendScale(a.legend[e-1])}),t.attr("class",function(t){return i.Legend.getClass(t,null===i.legendScale)})}),e.select("title").text(function(t,e){return 0===e?i.formatStringWithObject(a.legendTitleFormat.lower,{min:a.legend[e],name:a.itemName[1]}):e===r.length-1?i.formatStringWithObject(a.legendTitleFormat.upper,{max:a.legend[e-1],name:a.itemName[1]}):i.formatStringWithObject(a.legendTitleFormat.inner,{down:a.legend[e-1],up:a.legend[e],name:a.itemName[1]})}),e.on("mouseover",function(t){i.legendTip.show(t,this)}).on("mouseout",function(){i.legendTip.hide()}),o.transition().duration(a.animationDuration).attr("x",u()).attr("y",c()).attr("width",n.getDim("width")).attr("height",n.getDim("height")),o.select("g").transition().duration(a.animationDuration).attr("transform",function(){return"vertical"===a.legendOrientation?"rotate(90 "+a.legendCellSize/2+" "+a.legendCellSize/2+")":""}),i.resize()},h.prototype.getDim=function(t){var e="horizontal"===this.calendar.options.legendOrientation;switch(t){case"width":return this.dim[e?"width":"height"];case"height":return this.dim[e?"height":"width"]}},h.prototype.buildColors=function(){var t=this.calendar.options;if(null===t.legendColors)return this.calendar.legendScale=null,!1;var e=[];if(Array.isArray(t.legendColors))e=t.legendColors;else{if(!t.legendColors.hasOwnProperty("min")||!t.legendColors.hasOwnProperty("max"))return t.legendColors=null,!1;e=[t.legendColors.min,t.legendColors.max]}var n,i=t.legend.slice(0);i[0]>0?i.unshift(0):i[0]<=0&&i.unshift(i[0]-(i[i.length-1]-i[0])/i.length),n=t.legendColors.hasOwnProperty("colorScale")?t.legendColors.colorScale:u.scale.linear().range(e).interpolate(u.interpolateHcl).domain([u.min(i),u.max(i)]);var o=i.map(function(t){return n(t)});return this.calendar.legendScale=u.scale.threshold().domain(t.legend).range(o),!0},h.prototype.getClass=function(t,e){if(null===t||isNaN(t))return"";for(var n=[this.calendar.options.legend.length+1],i=0,o=this.calendar.options.legend.length-1;i<=o;i++){if(this.calendar.options.legend[0]>0&&t<0){n=["1","i"];break}if(t<=this.calendar.options.legend[i]){n=[i+1];break}}return 0===t&&n.push(0),n.unshift(""),(n.join(" r")+(e?n.join(" q"):"")).trim()},i=[n(55)],void 0===(o=function(){return c}.apply(e,i))||(t.exports=o)},3001:function(t,e,n){},3003:function(t,e,n){},3005:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.formData,n=t.payload,i=t.datasource,o=e.cellPadding,a=e.cellRadius,r=e.cellSize,s=e.linearColorScheme,l=e.showLegend,u=e.showMetricName,c=e.showValues,m=e.steps,h=e.xAxisTimeFormat,d=e.yAxisFormat,g=i.verboseMap;return{data:n.data,cellPadding:o,cellRadius:a,cellSize:r,linearColorScheme:s,showLegend:l,showMetricName:u,showValues:c,steps:m,timeFormat:h,valueFormat:d,verboseMap:g}}}}]);